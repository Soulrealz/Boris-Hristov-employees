<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Employee Pair Analyzer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"/>
</head>
<body class="container mt-5">

<h2>Upload CSV File</h2>
<p class="mb-3">
    Supported date formats:
<ul>
    <li><code>yyyy-MM-dd</code> (e.g., 2025-05-17)</li>
    <li><code>dd-MM-yyyy</code> (e.g., 17-05-2025)</li>
    <li><code>MM/dd/yyyy</code> (e.g., 05/17/2025)</li>
</ul>
</p>
<form th:action="@{/getLongestPair}" method="post" enctype="multipart/form-data">
    <input type="file" name="file" class="form-control mb-3" required>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

<div th:if="${message}" class="alert alert-info mt-3" th:text="${message}"></div>
<div th:if="${errorMessage}" class="alert alert-danger mt-3" th:text="${errorMessage}"></div>

<div th:if="${bestPairs}">
    <h3 class="mt-4">Top Collaborating Pair - Total Days: <span th:text="${totalDays}"></span></h3>
    <table class="table table-bordered mt-3">
        <thead>
        <tr>
            <th>Employee ID #1</th>
            <th>Employee ID #2</th>
            <th>Project ID</th>
            <th>Days Worked Together</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="pair : ${bestPairs}">
            <td th:text="${pair.empId1()}"></td>
            <td th:text="${pair.empId2()}"></td>
            <td th:text="${pair.projectId()}"></td>
            <td th:text="${pair.daysWorkedTogether()}"></td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>
